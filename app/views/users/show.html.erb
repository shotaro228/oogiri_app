<div class="container">
  <div class="pl-3 pt-3 pr-3 pb-4 border mb-5">
    <div class="row">
      <%= image_tag "/user_images/#{@user.image_name}", class: "image_fluid col-2" %>
    </div>
    <div class="row">
      <p class="font-weight-bold lead col-8 pl-5 pt-4"><%= @user.name %></p>
      <% unless @current_user == @user %>
        <% if @current_user.following?(@user) %>
          <%= form_for(@current_user.follows.find_by(follow_id: @user.id), html: { method: :delete }) do |f| %>
            <%= hidden_field_tag :follow_id, @user.id %>
            <%= f.submit 'フォロー解除', class: 'btn btn-primary byn-blocks' %>
          <% end %>
        <% else %>
          <%= form_for(@current_user.follows.build) do |f| %>
            <%= hidden_field_tag :follow_id, @user.id %>
            <%= f.submit 'フォローする', class: 'btn btn-primary btn-block' %>
          <% end %>
        <% end %>
      <% end %>
    </div>
    <div class="row">
      <p class="col pt-4"><%= @user.introduction %></p>
    </div>
    <div class="row">
      <%= link_to("#{@user.followings.count}"+"フォロー", "/users/#{@user.id}/follow_to", class: "col-2") %>
      <%= link_to("#{@user.followers.count}"+"フォロワー", "/users/#{@user.id}/followed", class: "col-2") %>
    </div>
  </div>
</div>

<% @answers.each do |answer| %>
<div class="container">
  <div class="border p-3">
    <div class="row">
      <%= image_tag "/user_images/#{@user.image_name}", class: "image_fluid col-1" %>
      <p class="col-9 font-weight-bold"><%= @user.name %></p>
      <p class="col-2"><%= answer.created_at %></p>
    </div>
    <div class="row">
      <%= link_to(answer.content, "/answers/#{answer.id}", class: "col pt-4") %>
    </div>
    <div class="row justify-content-end">
      <div class="col-1">
        <% if Like.find_by(user_id: @current_user.id, answer_id: answer.id) %>
          <%= link_to("/likes/#{answer.id}/destroy", {method: "post"}) do %>
            <i class="fas fa-heart fa-2x fa-fw" style="color:red;"></i>
          <% end %>
        <% else %>
          <%= link_to("/likes/#{answer.id}/create", {method: "post"}) do %>
            <i class="far fa-heart fa-2x fa-fw" style="color:red;"></i>
          <% end %>
        <% end %>
        <%= link_to(answer.likes.count, "/answers/#{answer.id}/liked") %>
      </div>
      <div class="col-2">
        <%= link_to("/comments/#{answer.id}/new") do %>
          <% if Comment.find_by(user_id: @current_user.id, answer_id: answer.id) %>
            <i class="fas fa-comment fa-2x fa-fw" style="color:royalblue;"></i>
          <% else %>
            <i class="far fa-comment fa-2x fa-fw"></i>
          <% end %>
        <% end %>
        <%= link_to(answer.comments.count, "/answers/#{answer.id}/commented") %>
      </div>
    </div>
  </div>
</div>
<% end %>